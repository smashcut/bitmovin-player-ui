@import 'variables';
@import '../mixins';

$seekbar-height: .5em;

%ui-seekbar {
  @extend %ui-component;

  @include hidden;

  cursor: pointer;
  font-size: 1em;
  height: 1em;
  position: relative;
  width: 100%;

  $bar-inset: auto;

  .#{$prefix}-seekbar {
    height: 8px;
    position: relative;
    border: 0 solid transparent;
    border-radius: 4px;
    background: #444444;
    overflow: hidden;

    %bar {
      // sass-lint:disable no-vendor-prefixes
      -ms-transform-origin: 0 0; // required for IE9
      -webkit-transform-origin: 0 0; // required for Android 4.4 WebView
      bottom: 0;
      box-sizing: border-box;
      left: 0;
      margin: auto;
      position: absolute;
      right: auto;
      top: 0;
      transform-origin: 0 0;
      width: 100%;
    }

    %rounded-bar {
      @extend %bar;
      border: 0 solid transparent;
      border-radius: 4px 0 0 4px;
    }

    .#{$prefix}-seekbar-backdrop {
      @extend %rounded-bar;
      background-color: transparent; // transparentize($color-primary, .8);
      margin: $bar-inset 0;
      width: 100%;
    }

    .#{$prefix}-seekbar-bufferlevel {
      @extend %rounded-bar;
      background-color: #84878d; // $color-primary;
      margin: $bar-inset 0;
      transition: .3s linear, .3s linear;
      transition-property: transform;
    }

    .#{$prefix}-seekbar-seekposition {
      @extend %rounded-bar;
      background-color: rgba(255, 255, 255, 0.3); // transparentize($color-primary, .8);
      margin: $bar-inset 0;
    }

    .#{$prefix}-seekbar-playbackposition {
      @extend %rounded-bar;
      background-color: $color-highlight;
      margin: $bar-inset 0;
      transition: .1s linear, .1s linear;
      transition-property: transform;
    }

    .#{$prefix}-seekbar-playbackposition-marker {
      @extend %bar;
      @include seekbar-position-marker($seekbar-height * 3);

      background-color: transparentize($color-highlight, .5);
      border: solid $color-highlight .1875em;
      border-radius: 50%;
      display: none;
    }

    .#{$prefix}-seekbar-markers {
      @extend %bar;

      $marker-width: 2px;

      margin: ($bar-inset / 1.3) 0;

      %commonMarkerStyles {
        border-radius: 50%;
        box-sizing: content-box;
        height: 8px;
        margin-left: -6px;
        position: absolute;
        top: -17px;
        transition: transform 0.25s;
        width: 8px;

        &.bigger {
          //top: -19px;
          left: -2px;
          transform: scale(1.5);
        }
      }

      > .#{$prefix}-seekbar-marker-type-default {
        @extend %commonMarkerStyles;

        background-color: $new-color-smashcut-green;
      }

      > .#{$prefix}-seekbar-marker-type-mentor {
        @extend %commonMarkerStyles;

        background-color: $new-color-smashcut-blue;
      }

      > .#{$prefix}-seekbar-marker-type-student {
        @extend %commonMarkerStyles;

        background-color: $new-color-smashcut-gray;
      }

      > .#{$prefix}-seekbar-marker-type-note {
        @extend %commonMarkerStyles;

        border: 2px solid $new-color-smashcut-orange;
        // offset position marker to center it on its actual position
        height: 4px;
        width: 4px;
      }

      > .#{$prefix}-seekbar-marker-type-staff {
        @extend %commonMarkerStyles;

        background-color: $new-color-smashcut-red;
      }
    }
  }

  // disable animations during seeks
  &.#{$prefix}-seeking {
    .#{$prefix}-seekbar {
      .#{$prefix}-seekbar-bufferlevel,
      .#{$prefix}-seekbar-playbackposition {
        transition: none;
      }
    }
  }

  &.#{$prefix}-vertical {
    .#{$prefix}-seekbar {
      //overflow-y: hidden;
      height: 100%;
      width: auto;

      %bar-vertical {
        right: 0;
        top: auto;
      }

      %positionmarker-vertical {
        //@extend %positionmarker-horizontal;

        .#{$prefix}-seekbar-playbackposition-marker {
          height: 1em;
          top: -.5em;
          width: 100%;
        }
      }

      .#{$prefix}-seekbar-backdrop {
        @extend %bar-vertical;

        height: 100%;
        margin: 0 $bar-inset;
        width: auto;
      }

      .#{$prefix}-seekbar-bufferlevel {
        @extend %bar-vertical;

        margin: 0 $bar-inset;
      }

      .#{$prefix}-seekbar-seekposition {
        @extend %bar-vertical;

        margin: 0 $bar-inset;
      }

      .#{$prefix}-seekbar-playbackposition {
        @extend %bar-vertical;
        @extend %positionmarker-vertical;
      }
    }
  }
}

.#{$prefix}-ui-seekbar {
  @extend %ui-seekbar;
}
